<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MilEd.One - פורטל סגל</title>

<style>

body {
font-family:'Segoe UI',sans-serif;
background:#f4f7f6;
margin:0;
display:flex;
align-items:center;
justify-content:center;
min-height:100vh;
}

.container {
max-width:800px;
width:90%;
background:white;
padding:40px;
border-radius:20px;
box-shadow:0 10px 30px rgba(0,0,0,0.05);
text-align:center;
}

h1 {
color:#9b59b6;
font-size:2.2rem;
margin-bottom:10px;
}

.subtitle {
color:#7f8c8d;
margin-bottom:30px;
}

.grid {
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
}

.btn {

padding:25px;

border-radius:15px;

text-decoration:none;

color:white;

background:#9b59b6;

font-weight:bold;

transition:0.3s;

display:flex;

align-items:center;

justify-content:center;

}

.btn:hover {

transform:translateY(-3px);

background:#8e44ad;

}

.back-btn {

display:inline-block;

margin-top:40px;

color:#7f8c8d;

text-decoration:none;

font-weight:bold;

}

@media(max-width:600px){

.grid{grid-template-columns:1fr;}

}

</style>

</head>


<body>

<div class="container">

<span>MilEd.One</span>

<h1 id="title">פורטל סגל</h1>

<p id="subtitle">טוען...</p>

<div id="list" class="grid"></div>

<a href="/" class="back-btn">← חזרה</a>

</div>


<script>


// ─────────────────────────────
// facultyId — מזהה מרצה
// ─────────────────────────────

let facultyId = sessionStorage.getItem("facultyId");

if(!facultyId){

facultyId = prompt("הכנס מזהה מרצה:");

if(facultyId){

sessionStorage.setItem("facultyId",facultyId);

}

}


// ─────────────────────────────
// access control
// ─────────────────────────────

function hasAccess(tool){

const scope = tool.scope || "global";

const owner = tool.owner || null;


if(scope==="global") return true;

if(scope==="institution") return true;

if(scope==="faculty_private")

return owner===facultyId;


return false;

}


// ─────────────────────────────
// load config
// ─────────────────────────────

fetch('/config.json')

.then(r=>r.json())

.then(data=>{

const faculty = data.branches.faculty;

document.getElementById("title").innerText = faculty.title;

document.getElementById("subtitle").innerText = faculty.subtitle;


for(let id in faculty.items){

const tool = faculty.items[id];

if(!hasAccess(tool)) continue;


const a=document.createElement("a");

a.className="btn";

a.href=`/chat.html?classId=${id}`;

a.innerText=tool.name;

document.getElementById("list").appendChild(a);

}

});

</script>


</body>
</html>
