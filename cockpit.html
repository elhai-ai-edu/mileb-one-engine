<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8"><title>MilEd.One Cockpit - 砖 </title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a2a3a; color: white; padding: 20px; }
        .cockpit-card { max-width: 1000px; margin: auto; background: #ecf0f1; color: #333; padding: 30px; border-radius: 15px; }
        .section { background: white; padding: 20px; border-radius: 10px; margin-bottom: 25px; border-right: 10px solid #3498db; }
        .home-section { border-right-color: #e74c3c; } /* 爪注 砖 祝 转 */
        h2 { margin-top: 0; color: #2c3e50; }
        label { font-weight: bold; display: block; margin-top: 10px; }
        input { width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ddd; }
        .card-edit { background: #f9f9f9; padding: 15px; margin-top: 10px; border-radius: 8px; border: 1px dashed #ccc; }
        .btn-save { background: #e67e22; color: white; width: 100%; padding: 20px; font-size: 1.5rem; border: none; cursor: pointer; border-radius: 10px; }
        textarea { width: 100%; height: 200px; margin-top: 20px; display: none; }
    </style>
</head>
<body>
<div class="cockpit-card">
    <h1>MilEd.One -  拽专 专砖</h1>
    
    <div class="section home-section">
        <h2>  祝 转 (Main Page)</h2>
        <label>转专转 专砖转:</label>
        <input type="text" id="h-main-title" onchange="config.home.main_title = this.value">
        <label>转转 转专转:</label>
        <input type="text" id="h-main-subtitle" onchange="config.home.main_subtitle = this.value">
        
        <div id="home-cards-editor"></div>
    </div>

    <div id="branches-editor"></div>

    <button class="btn-save" onclick="generate()">砖专 驻拽 拽 注 </button>
    <textarea id="json-output"></textarea>
</div>

<script>
    let config = {};
    fetch('/config.json').then(r => r.json()).then(data => {
        config = data;
        initHome();
        initBranches();
    });

    function initHome() {
        document.getElementById('h-main-title').value = config.home.main_title;
        document.getElementById('h-main-subtitle').value = config.home.main_subtitle;
        const container = document.getElementById('home-cards-editor');
        container.innerHTML = '<h3>注专转 专住 :</h3>';
        config.home.cards.forEach((card, index) => {
            const div = document.createElement('div');
            div.className = 'card-edit';
            div.innerHTML = `
                <label>转专转 专住 ${index+1}:</label>
                <input type="text" value="${card.title}" onchange="config.home.cards[${index}].title = this.value">
                <label>转专 专住:</label>
                <input type="text" value="${card.desc}" onchange="config.home.cards[${index}].desc = this.value">
            `;
            container.appendChild(div);
        });
    }

    function initBranches() {
        const root = document.getElementById('branches-editor');
        for (let b in config.branches) {
            if (b === 'cockpit') continue;
            const branch = config.branches[b];
            const div = document.createElement('div');
            div.className = 'section';
            div.innerHTML = `<h2>注祝: ${branch.title}</h2>
                <label>转专转 驻转:</label><input type="text" value="${branch.title}" onchange="config.branches['${b}'].title = this.value">
                <label>转专 驻:</label><input type="text" value="${branch.subtitle}" onchange="config.branches['${b}'].subtitle = this.value">
            `;
            root.appendChild(div);
        }
    }

    function generate() {
        const out = document.getElementById('json-output');
        out.value = JSON.stringify(config, null, 2);
        out.style.display = 'block';
        out.select();
        alert("拽 驻拽! 注转拽 转 -config.json .");
    }
</script>
</body>
</html>
