<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MilEd.One - פורטל סטודנטים</title>

<style>

body {
font-family:'Segoe UI',Tahoma,sans-serif;
background:#f4f7f6;
margin:0;
display:flex;
align-items:center;
justify-content:center;
min-height:100vh;
}

.portal-container {
max-width:800px;
width:90%;
background:white;
padding:40px;
border-radius:20px;
box-shadow:0 10px 30px rgba(0,0,0,0.05);
text-align:center;
}

.brand {
color:#000;
font-size:1.2rem;
margin-bottom:10px;
font-weight:300;
display:block;
}

.main-title {
color:#003366;
font-size:2.2rem;
margin-bottom:10px;
font-weight:700;
}

.subtitle {
color:#7f8c8d;
font-size:1.2rem;
margin-bottom:40px;
}

.course-grid {
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
}

.course-card {

padding:25px;

border-radius:15px;

text-decoration:none;

color:white;

background:#3498db;

transition:all 0.3s ease;

display:flex;

align-items:center;

justify-content:center;

font-weight:600;

font-size:1.2rem;

}

.course-card:hover {

transform:translateY(-5px);

box-shadow:0 5px 15px rgba(0,0,0,0.1);

background:#2980b9;

}

.back-link {
display:block;
margin-top:30px;
color:#7f8c8d;
text-decoration:none;
font-size:0.9rem;
}

@media(max-width:600px){

.course-grid{grid-template-columns:1fr;}

}

</style>

</head>

<body>

<div class="portal-container">

<span class="brand">MilEd.One</span>

<h1 id="title" class="main-title">פורטל סטודנטים</h1>

<p id="subtitle" class="subtitle">טוען קורסים...</p>

<div id="course-list" class="course-grid"></div>

<a href="/" class="back-link">← חזרה לדף הבית</a>

</div>

<script>


// ─────────────────────────────
// studentId session
// ─────────────────────────────

let studentId = sessionStorage.getItem("studentId");

if(!studentId){

studentId = "s_"+Math.random().toString(36).slice(2,10);

sessionStorage.setItem("studentId",studentId);

}


// ─────────────────────────────
// access control for student layer
// ─────────────────────────────

function studentHasAccess(tool){

const scope = tool.scope || "global";


if(scope==="global") return true;

if(scope==="institution") return true;

if(scope==="course_specific") return true;


if(scope==="faculty_private") return false;


return false;

}


// ─────────────────────────────
// load config
// ─────────────────────────────

fetch('/config.json')

.then(res=>res.json())

.then(data=>{

const branch = data.branches.courses;

document.getElementById("title").innerText = branch.title;

document.getElementById("subtitle").innerText = branch.subtitle;


const list=document.getElementById("course-list");

for(const [id,info] of Object.entries(branch.items)){

if(!studentHasAccess(info))
continue;


const a=document.createElement("a");

a.href=`/chat.html?classId=${id}`;

a.className="course-card";

a.innerText=info.name;

list.appendChild(a);

}

})

.catch(err=>{

console.error(err);

document.getElementById("subtitle").innerText="שגיאה בטעינת קורסים";

});


</script>

</body>
</html>
